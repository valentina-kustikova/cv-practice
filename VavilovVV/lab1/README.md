# Практическая работа №1. Обработка изображений с использованием библиотеки OpenCV ##

Скрипт предоставляет различные режимы работы, от простого изменения размера до сложных эффектов, таких как виньетка, сепия, наложение текстур и рамок.

---

## Описание функций обработки изображений


### `mode_sepia(image, alpha=1.0)`
* **Назначение:** Применяет эффект сепии к изображению.
* **Вход:** `image` (np.ndarray) — исходное BGR-изображение; `alpha` (float) — сила эффекта (0.0-1.0).
* **Выход:** NumPy-массив с применённым эффектом сепии.
* **Принцип работы:** Выполняет **матричное умножение** каналов изображения на стандартную матрицу преобразования сепии. Результат затем **линейно смешивается** (`blending`) с исходным изображением в соответствии со значением `alpha`.

### `mode_resize(image, new_width, new_height)`
* **Назначение:** Изменяет размер изображения до заданных ширины и высоты.
* **Вход:** `image` (np.ndarray) — исходное изображение; `new_width` (int), `new_height` (int) — целевые размеры.
* **Выход:** NumPy-массив с новым разрешением.
* **Принцип работы:** Реализует **интерполяцию ближайшего соседа** (**Nearest Neighbor**). Вычисляет масштабные коэффициенты и использует индексацию NumPy для выбора пикселей из исходного изображения, соответствующих каждой точке в новом изображении.

### `mode_vignette(image, strength=0.8, softness=0.4)`
* **Назначение:** Применяет эффект виньетки (затемнение по краям).
* **Вход:** `image` (np.ndarray) — исходное изображение; `strength` (float) — максимальная сила затемнения; `softness` (float) — радиус центральной области.
* **Выход:** NumPy-массив с эффектом виньетки.
* **Принцип работы:** Генерирует **радиальную маску**, где значение пикселя зависит от его расстояния до центра изображения. Затем эта маска умножается на исходное изображение, постепенно затемняя края и оставляя центр светлым.

### `pixelate_area(image, x, y, width, height, block_size=15)`
* **Назначение:** Пикселизирует заданную прямоугольную область изображения.
* **Вход:** `image` (np.ndarray) — исходное изображение; `x`, `y` (int) — координаты начала области; `width`, `height` (int) — размеры области; `block_size` (int) — размер блока пикселизации.
* **Выход:** Изображение с пикселизированной областью.
* **Принцип работы:** Выделяет область интереса (**ROI**). Затем область делится на блоки размером `block_size x block_size`. В каждом блоке вычисляется **среднее значение цвета**, и весь блок заполняется этим усреднённым цветом.

### `add_border(image, border_width, color=(0, 0, 255))`
* **Назначение:** Добавляет однотонную рамку заданной толщины вокруг изображения.
* **Вход:** `image` (np.ndarray) — исходное изображение; `border_width` (int) — толщина рамки; `color` (tuple) — цвет в формате BGR.
* **Выход:** Изображение с добавленной рамкой.
* **Принцип работы:** Использует прямую индексацию NumPy для заполнения крайних полос изображения (верхней, нижней, левой, правой) заданным цветом на толщину `border_width`.

### `apply_frame_from_image(target_image, frame_source_image, thickness=100, mask_threshold=20, alpha=1.0)`
* **Назначение:** Накладывает рамку, вырезанную из другого изображения-источника.
* **Вход:** `target_image` — целевое изображение; `frame_source_image` — изображение-источник рамки; `thickness` — толщина рамки; `mask_threshold` — порог для маски прозрачности; `alpha` — сила наложения.
* **Выход:** Изображение с наложенной рамкой.
* **Принцип работы:** Исходное изображение рамки делится на **угловые** и **боковые** части. Боковые части масштабируются под размер целевого изображения с помощью `mode_resize`. Каждая часть накладывается на соответствующую область целевого изображения с использованием **альфа-блендинга** и маски, созданной из четвёртого (альфа) канала или по яркости.

### `apply_flares_from_image(target_image, flare_source_image, threshold=220, alpha=1)`
* **Назначение:** Накладывает блики или засветы (flares) из изображения-источника.
* **Вход:** `target_image` — целевое изображение; `flare_source_image` — изображение с бликами; `threshold` — порог яркости для выделения бликов; `alpha` — сила наложения.
* **Выход:** Изображение с добавленными бликами.
* **Принцип работы:** Изображение бликов масштабируется до размера целевого, если это необходимо. Затем создаётся **маска** на основе **яркости**, выделяющая только те области источника, яркость которых выше `threshold`. Полученные блики **аддитивно** (сложением) накладываются на целевое изображение.

### `apply_texture_blend(target_image, texture_image, alpha=0.3)`
* **Назначение:** Накладывает текстуру на изображение методом линейного блендинга.
* **Вход:** `target_image` — целевое изображение; `texture_image` — изображение-текстура; `alpha` (float) — сила наложения текстуры.
* **Выход:** Изображение с наложенной текстурой.
* **Принцип работы:** Текстура масштабируется до размера целевого изображения. Затем происходит **линейное смешивание** двух изображений по формуле: $I_{final} = (1 - \alpha) \cdot I_{target} + \alpha \cdot I_{texture}$.

