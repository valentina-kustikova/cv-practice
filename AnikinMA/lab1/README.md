# Практическая работа №1. Обработка изображений с использованием библиотеки OpenCV

## Цель работы
Целью практической работы является изучение принципов цифровой обработки изображений и освоение работы с изображением как с матрицей чисел с использованием языка программирования Python и библиотеки OpenCV.

В рамках работы требуется реализовать набор фильтров обработки изображений, используя **только базовые операции над изображениями (матрицами)** без применения высокоуровневых функций обработки изображений библиотеки OpenCV.

---

## Постановка задачи
Необходимо разработать библиотеку фильтров обработки изображений, реализующую следующие функции:

1. Изменение разрешения изображения.
2. Применение фотоэффекта сепии.
3. Применение фотоэффекта виньетки.
4. Пикселизация заданной прямоугольной области изображения.
5. Наложение прямоугольной одноцветной рамки заданной ширины по краям изображения.
6. Наложение фигурной одноцветной рамки по краям изображения (тип рамки задаётся параметром).
7. Наложение эффекта бликов объектива камеры.
8. Наложение текстуры акварельной бумаги.

---

## Требования к реализации
- Язык программирования: **Python**.
- Среда разработки: **Spyder / терминал Linux**.
- Использование библиотеки OpenCV допускается **только** для загрузки и сохранения изображений.
- Запрещено использование высокоуровневых функций обработки изображений OpenCV (resize, blur, transform и др.).
- Все фильтры должны быть реализованы вручную с использованием арифметических операций, циклов, индексации и функций библиотеки NumPy.
- Программа должна демонстрировать работу каждого фильтра.

---

## Структура проекта

```
lab1/
├── filters.py   # библиотека фильтров обработки изображений
├── main.py      # консольное приложение для демонстрации фильтров
├── README.md    # отчёт по практической работе
└── .gitignore   # исключения для системы контроля версий
```

---

## Описание файлов

### filters.py
Содержит реализацию всех фильтров обработки изображений. Каждый фильтр оформлен в виде отдельной функции.

### main.py
Консольное приложение с интерактивным меню, позволяющее:
- выбрать изображение для обработки;
- выбрать тип фильтра;
- задать параметры фильтра;
- сохранить результат обработки в новый файл;
- открыть результат в системном просмотрщике изображений.

---

## Описание алгоритмов фильтрации

### 1. Изменение разрешения изображения
Фильтр изменяет размер изображения до заданной ширины и высоты.

**Алгоритм:**
1. Для каждого пикселя выходного изображения вычисляется соответствующая координата в исходном изображении.
2. Используется метод билинейной интерполяции:
   - выбираются четыре соседних пикселя исходного изображения;
   - вычисляется взвешенная сумма значений каналов.
3. Полученные значения ограничиваются диапазоном [0; 255].

---

### 2. Фотоэффект сепии
Фильтр придаёт изображению тёплый коричневатый оттенок.

**Алгоритм:**
Для каждого пикселя выполняется пересчёт каналов по формулам:
- R' = 0.393·R + 0.769·G + 0.189·B
- G' = 0.349·R + 0.686·G + 0.168·B
- B' = 0.272·R + 0.534·G + 0.131·B

---

### 3. Фотоэффект виньетки
Фильтр затемняет края изображения.

**Алгоритм:**
1. Вычисляется расстояние каждого пикселя до центра изображения.
2. Формируется радиальная маска по формуле:
   mask = exp(-r² / (2·σ²))
3. Значения пикселей умножаются на маску.

---

### 4. Пикселизация области изображения
Создаёт эффект мозаики в заданной области.

**Алгоритм:**
1. Выбирается прямоугольная область изображения.
2. Область разбивается на блоки фиксированного размера.
3. Каждый блок заменяется средним значением цвета.

---

### 5. Прямоугольная одноцветная рамка
Накладывает рамку по периметру изображения.

**Алгоритм:**
1. Закрашиваются верхняя и нижняя полосы изображения.
2. Закрашиваются левая и правая полосы.
3. Толщина и цвет рамки задаются параметрами.

---

### 6. Фигурная одноцветная рамка
Сохраняет изображение внутри заданной фигуры.

**Поддерживаемые фигуры:** эллипс, круг, ромб, звезда.

**Алгоритм:**
1. Формируется логическая маска фигуры на основе аналитических уравнений.
2. Пиксели вне фигуры заменяются цветом рамки.

---

### 7. Эффект бликов объектива
Добавляет искусственные световые блики.

**Алгоритм:**
1. Генерируются несколько случайных центров бликов.
2. Для каждого блика вычисляется гауссово пятно.
3. Пятна суммируются и добавляются к изображению.

---

### 8. Текстура акварельной бумаги
Имитирует текстуру бумаги.

**Алгоритм:**
1. Генерируется многомасштабный шум.
2. Шум масштабируется вручную и суммируется.
3. Итоговая текстура используется как коэффициент умножения изображения.

---

## Запуск программы

```bash
python3 main.py
```

После запуска программа предложит выбрать изображение, фильтр и параметры фильтрации.

---

## Результаты работы
В результате выполнения практической работы реализована библиотека фильтров обработки изображений и консольное приложение для их демонстрации. Все фильтры соответствуют требованиям задания и реализованы без использования высокоуровневых функций обработки изображений OpenCV.

---

## Выводы
В ходе выполнения практической работы были изучены основы цифровой обработки изображений, принципы работы с изображением как с матрицей, а также методы реализации визуальных эффектов с использованием базовых математических операций.
